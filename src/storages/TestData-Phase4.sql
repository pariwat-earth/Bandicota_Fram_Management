-- Phase 4: สร้างประวัติการผสมพันธุ์เพื่อทดสอบการแจ้งเตือน 3 แบบ
-- ใช้หนูจาก Phase 2 ที่ยังไม่ได้ผสม

-- กรณีที่ 1: ไม่ยอมผสมเกินกว่าที่กำหนด (หนู 15 + หนู 16)
-- ใช้ลูกจากคู่ 5+2 (ปจ.003×ปจ.001)
INSERT INTO breeding (father_id, mother_id, breeding_date, pond_id, inbreeding_rate, breeding_status, separation_date) VALUES
('202507050007', '202507050008', '2025-08-10', 4, 0, 'unsuccess', '2025-08-20'),
('202507050007', '202507050008', '2025-08-21', 4, 0, 'unsuccess', '2025-08-30'),
('202507050007', '202507050008', '2025-09-01', 4, 0, 'unsuccess', '2025-09-10'),
('202507050007', '202507050008', '2025-09-11', 4, 0, 'unsuccess', '2025-09-20'),
('202507050007', '202507050008', '2025-09-21', 4, 0, 'unsuccess', '2025-09-30'),
('202507050007', '202507050008', '2025-10-01', 4, 0, 'unsuccess', '2025-10-10');

-- กรณีที่ 2: ให้ลูกน้อยเกินไป (หนู 19 + หนู 21)
-- ใช้ลูกจากคู่ 3+6 (ปจ.002×ปจ.003)
INSERT INTO breeding (father_id, mother_id, breeding_date, pond_id, inbreeding_rate, breeding_status, birth_date, total_pups, survived_pups, albino_pups, separation_date) VALUES
('202507050011', '202507050013', '2025-08-10', 5, 0, 'success', '2025-09-10', 8, 8, 0, '2025-09-25'),
('202507050011', '202507050013', '2025-10-01', 5, 0, 'success', '2025-11-01', 6, 6, 0, '2025-11-15'),
('202507050011', '202507050013', '2025-11-20', 5, 0, 'success', '2025-12-20', 4, 4, 0, '2026-01-05'),
('202507050011', '202507050013', '2026-01-10', 5, 0, 'success', '2026-02-10', 2, 2, 0, '2026-02-25');

-- กรณีที่ 3: ผสมพันธุ์เกินกว่าที่กำหนด - เพิ่มหลายคู่สำหรับทดสอบ

-- คู่แรก: หนู 11 + หนู 12 (ใช้ลูกจากคู่ 5+2)
INSERT INTO breeding (father_id, mother_id, breeding_date, pond_id, inbreeding_rate, breeding_status, birth_date, total_pups, survived_pups, albino_pups, separation_date) VALUES
('202507050003', '202507050004', '2025-08-10', 6, 0, 'success', '2025-09-10', 7, 7, 0, '2025-09-25'),
('202507050003', '202507050004', '2025-10-01', 6, 0, 'success', '2025-11-01', 8, 8, 0, '2025-11-15'),
('202507050003', '202507050004', '2025-11-20', 6, 0, 'success', '2025-12-20', 7, 7, 0, '2026-01-05'),
('202507050003', '202507050004', '2026-01-10', 6, 0, 'success', '2026-02-10', 8, 8, 0, '2026-02-25'),
('202507050003', '202507050004', '2026-03-01', 6, 0, 'success', '2026-04-01', 7, 7, 0, '2026-04-15'),
('202507050003', '202507050004', '2026-04-20', 6, 0, 'success', '2026-05-20', 8, 8, 0, '2026-06-05'),
('202507050003', '202507050004', '2026-06-10', 6, 0, 'success', '2026-07-10', 7, 7, 0, '2026-07-25');

-- คู่ที่สอง: หนู 26 + หนู 25 (ใช้ลูกจากคู่ 3+6)
INSERT INTO breeding (father_id, mother_id, breeding_date, pond_id, inbreeding_rate, breeding_status, birth_date, total_pups, survived_pups, albino_pups, separation_date) VALUES
('202507050018', '202507050017', '2025-08-10', 7, 0, 'success', '2025-09-10', 9, 9, 0, '2025-09-25'),
('202507050018', '202507050017', '2025-10-01', 7, 0, 'success', '2025-11-01', 10, 10, 0, '2025-11-15'),
('202507050018', '202507050017', '2025-11-20', 7, 0, 'success', '2025-12-20', 9, 9, 0, '2026-01-05'),
('202507050018', '202507050017', '2026-01-10', 7, 0, 'success', '2026-02-10', 10, 10, 0, '2026-02-25'),
('202507050018', '202507050017', '2026-03-01', 7, 0, 'success', '2026-04-01', 9, 9, 0, '2026-04-15'),
('202507050018', '202507050017', '2026-04-20', 7, 0, 'success', '2026-05-20', 10, 10, 0, '2026-06-05'),
('202507050018', '202507050017', '2026-06-10', 7, 0, 'success', '2026-07-10', 9, 9, 0, '2026-07-25');

-- คู่ที่สาม: หนู 31 + หนู 32 (ใช้ลูกจากคู่ 7+4)
INSERT INTO breeding (father_id, mother_id, breeding_date, pond_id, inbreeding_rate, breeding_status, birth_date, total_pups, survived_pups, albino_pups, separation_date) VALUES
('202507050023', '202507050024', '2025-08-10', 8, 0, 'success', '2025-09-10', 11, 11, 0, '2025-09-25'),
('202507050023', '202507050024', '2025-10-01', 8, 0, 'success', '2025-11-01', 12, 12, 0, '2025-11-15'),
('202507050023', '202507050024', '2025-11-20', 8, 0, 'success', '2025-12-20', 11, 11, 0, '2026-01-05'),
('202507050023', '202507050024', '2026-01-10', 8, 0, 'success', '2026-02-10', 12, 12, 0, '2026-02-25'),
('202507050023', '202507050024', '2026-03-01', 8, 0, 'success', '2026-04-01', 11, 11, 0, '2026-04-15'),
('202507050023', '202507050024', '2026-04-20', 8, 0, 'success', '2026-05-20', 12, 12, 0, '2026-06-05'),
('202507050023', '202507050024', '2026-06-10', 8, 0, 'success', '2026-07-10', 11, 11, 0, '2026-07-25');

-- ตั้งสถานะปัจจุบันเป็น breeder1 และกำหนดบ่อ
UPDATE rat SET status = 'breeder1', pond_id = 4 WHERE rat_id IN ('202507050007', '202507050008');
UPDATE rat SET status = 'breeder1', pond_id = 5 WHERE rat_id IN ('202507050011', '202507050013');
UPDATE rat SET status = 'breeder1', pond_id = 6 WHERE rat_id IN ('202507050003', '202507050004');
UPDATE rat SET status = 'breeder1', pond_id = 7 WHERE rat_id IN ('202507050018', '202507050017');
UPDATE rat SET status = 'breeder1', pond_id = 8 WHERE rat_id IN ('202507050023', '202507050024');

-- เพิ่มการผสมพันธุ์ปัจจุบันที่กำลังดำเนินอยู่ (ครั้งที่ 8)
INSERT INTO breeding (father_id, mother_id, breeding_date, pond_id, inbreeding_rate, breeding_status) VALUES
('202507050007', '202507050008', '2025-10-15', 4, 0, 'breeding'), -- คู่ที่ 1: ไม่ยอมผสม (ครั้งที่ 7)
('202507050011', '202507050013', '2026-03-01', 5, 0, 'breeding'), -- คู่ที่ 2: ให้ลูกน้อยลง (ครั้งที่ 5)
('202507050003', '202507050004', '2026-08-01', 6, 0, 'breeding'), -- คู่ที่ 3: ผสมครั้งที่ 8 (ห่วงขา 11+12)
('202507050018', '202507050017', '2026-08-01', 7, 0, 'breeding'), -- คู่ที่ 4: ผสมครั้งที่ 8 (ห่วงขา 26+25)
('202507050023', '202507050024', '2026-08-01', 8, 0, 'breeding'); -- คู่ที่ 5: ผสมครั้งที่ 8 (ห่วงขา 31+32)

-- สรุปการแจ้งเตือนที่จะเกิดขึ้น:
-- 1. คู่ห่วงขา 15+16: ไม่ยอมผสม 6 ครั้งติดต่อกัน (ถึงเกณฑ์แจ้งเตือน)
-- 2. คู่ห่วงขา 19+21: จำนวนลูกลดลงเรื่อยๆ จาก 8 > 6 > 4 > 2 ตัว (ประสิทธิภาพลดลง)
-- 3. คู่ห่วงขา 11+12: ผสมครั้งที่ 8 (เกินเกณฑ์ 7 ครั้ง)
-- 4. คู่ห่วงขา 26+25: ผสมครั้งที่ 8 (เกินเกณฑ์ 7 ครั้ง)
-- 5. คู่ห่วงขา 31+32: ผสมครั้งที่ 8 (เกินเกณฑ์ 7 ครั้ง)